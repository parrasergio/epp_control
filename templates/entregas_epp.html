{% extends "base.html" %}

{% block title %}Entregas EPP{% endblock %}

{% block content %}
    <h2>Registro de Entregas de EPP</h2>

    <div class="container">
        <!-- Parte Izquierda (Datos Bombero y EPP) -->
        <div class="left-panel">
            <fieldset>
                <legend>Datos del BOMBERO</legend>
                <!-- Aplicación de la clase form-horizontal -->
                <div class="form-horizontal">
                    <label for="legajo">Legajo:</label>
                    <input type="text" id="legajo" required>
                    <button onclick="buscarBombero()">BUSCAR</button>
                    <button onclick="limpiarCampos()">LIMPIAR</button>
                </div>
                <p><strong>Nombre:</strong> <span id="nombre-lbl"></span></p>
                <p><strong>Apellido:</strong> <span id="apellido-lbl"></span></p>
                <p><strong>Jerarquía:</strong> <span id="jerarquia-lbl"></span></p>
            </fieldset>

            <fieldset>
                <legend>Entrega de EPP</legend>
                <!-- Aplicación de la clase form-horizontal -->
                <div class="form-horizontal">
                    <label for="codigo-epp">Código EPP:</label>
                    <input type="text" id="codigo-epp" required>
                    <button onclick="buscarEPP()">BUSCAR</button>
                </div>
                <p><strong>Nombre EPP:</strong> <span id="nombre-epp-lbl"></span></p>
                <p><strong>Stock Disponible:</strong> <span id="stock-lbl"></span></p>
                <!-- Aplicación de la clase form-horizontal -->
                <div class="form-horizontal">
                    <label for="cantidad">Cantidad a entregar:</label>
                    <input type="number" id="cantidad" value="1" min="1">
                </div>
                <!-- Aplicación de la clase form-horizontal -->
                <div class="form-horizontal">
                    <label for="motivo">Motivo:</label>
                    <textarea id="motivo" rows="3"></textarea>
                </div>
                <!-- Aplicación de la clase form-horizontal -->
                <div class="form-horizontal">
                    <label for="aprobado-por">Aprobado por:</label>
                    <input type="text" id="aprobado-por" required>
                </div>
                <button onclick="realizarEntrega()">ENTREGAR EPP</button>
            </fieldset>
        </div>

        <!-- Parte Derecha (Historial de Entregas) -->
        <div class="right-panel">
            <fieldset>
                <legend>Historial de entregas del bombero</legend>
                <table id="historial-tabla">
                    <thead>
                        <tr>
                            <th>Fecha</th><th>EPP</th><th>Cantidad</th><th>Motivo</th><th>Aprobado por</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Aquí se insertarán las filas con JavaScript -->
                    </tbody>
                </table>
                <button onclick="imprimirHistorialCSV()">Imprimir Historial (CSV)</button>
            </fieldset>
        </div>
    </div>
    <!-- Aquí irá nuestro código JavaScript que le dará vida a la interfaz -->
    <script src="{{ url_for('static', filename='js/entregas.js') }}"></script>

{% endblock %}
